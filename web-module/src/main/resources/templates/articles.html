<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <title>Articles</title>
</head>
<body>
<header>
    <span sec:authorize="isAuthenticated()">
        Logged user : <span sec:authentication="name"></span>   |
        Role: <span sec:authentication="principal.authorities"></span>   |
        <a th:href="@{/profile/{user_id}(user_id=${#authentication.principal.id})}">Profile</a>   |
        <a th:href="@{/logout}">Logout</a>
    </span>
</header>
<h1>Articles</h1>
Sort by:
<a th:href="@{/articles?sort=date}">Date</a>
<a th:href="@{/articles?sort=surname}">Surname</a>
<a th:href="@{/articles?sort=views}">Views</a>
<hr/>
<th:block th:each="article : ${articles}">
    <h3 th:text="${article.name}">...</h3>
    <h5 th:text="'Author: '+${article.userDTO.name}+' '+${article.userDTO.surname}">...</h5>
    <h5 th:text="'Created: '+${article.created}+' Views: '+${article.views}">...</h5>
    <p th:text="${article.text}">...</p>
    <a th:href="@{/articles/{id}(id=${article.id})}">More</a><br>
    <hr/>
</th:block>
<th:block th:each="i:${#numbers.sequence(1,pages)}">
    <a th:href="@{/articles?page={page}&sort={sort}(page=${i},sort=${sort})}"><span th:text="${i}">...</span></a>
</th:block>
</body>
</html>

